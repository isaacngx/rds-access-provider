{
    "typeName": "AWX::RDS::AccessProvider",
    "description": "This CloudFormation template creates an access provider for RDS databases. The access provider is implemented as an AWS SSO permission set that provides the necessary permissions for a database user to access RDS databases.",
    "createOnlyProperties": [
        "/properties/Username"
    ],
    "primaryIdentifier": [
        "/properties/Username"
    ],
    "replacementStrategy": "delete_then_create",
    "additionalProperties": false,
    "properties": {
        "Username": {
            "type": "string",
            "description": "The name of the database user to which the access provider will provide access.",
            "pattern": "^[a-z0-9.]{1,32}$",
            "minLength": 1,
            "maxLength": 32
        }
    },
    "required": [
        "Username"
    ],
    "handlers": {
        "create": {
            "permissions": [
                "iam:CreatePolicy",
                "iam:CreatePolicyVersion",
                "sso:PutInlinePolicyToPermissionSet",
                "sso:CreatePermissionSet",
                "identitystore:GetUserId",
                "sso:CreateAccountAssignment",
                "ssm:PutParameter",
                "sso:DescribeAccountAssignmentCreationStatus",
                "sso:DeletePermissionSet"
            ],
            "timeoutInMinutes": 5
        },
        "read": {
            "permissions": [
                "iam:GetPolicy",
                "iam:ListPolicies",
                "iam:ListPolicyVersions",
                "sso:GetInlinePolicyForPermissionSet",
                "sso:DescribePermissionSet",
                "sso:ListPermissionSets"
            ],
            "timeoutInMinutes": 5
        },
        "delete": {
            "permissions": [
                "iam:DeletePolicy",
                "iam:DeletePolicyVersion",
                "sso:DeleteInlinePolicyFromPermissionSet",
                "ssm:GetParameter",
                "sso:DeleteAccountAssignment",
                "sso:DeletePermissionSet",
                "ssm:DeleteParameter",
                "sso:DescribeAccountAssignmentDeletionStatus"
            ],
            "timeoutInMinutes": 5
        }
    }
}